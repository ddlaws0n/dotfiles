# ZSH CONFIGURATION
# Main zsh configuration file that loads all plugins, completions, and tools
# using antidote plugin manager with separation of concerns strategy.

# Ensure ZDOTDIR is set (fallback if .zprofile hasn't loaded yet)
export ZDOTDIR="${ZDOTDIR:-$HOME/.config/zsh}"

# Load configuration files in specific order for optimal performance
# Note: ZDOTDIR is set in .zprofile to $XDG_CONFIG_HOME/zsh

# 1. PATH management must load first to set up PATH correctly
[[ -r "$ZDOTDIR/path.zsh" ]] && source "$ZDOTDIR/path.zsh"

# 2. Load other configuration files
for config_file ("$ZDOTDIR"/*.zsh); do
  # Skip already loaded files
  [[ "$config_file" == *"path.zsh" ]] && continue
  [[ -r "$config_file" ]] && source "$config_file"
done

# EXTERNAL INTEGRATIONS

# 1Password shell plugins
[[ -f ~/.config/op/plugins.sh ]] && source ~/.config/op/plugins.sh

# PROMPT INITIALIZATION

# Initialize starship prompt (installed via Homebrew)
eval "$(starship init zsh)"